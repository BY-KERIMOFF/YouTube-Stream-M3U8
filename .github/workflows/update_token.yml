name: Ecanlitvizle Scraper

on:
  push:
    branches:
      - main  # Yalnız main branch-a push edildikdə çalışacaq
  pull_request:
    branches:
      - main  # Main branch-da PR açıldıqda da çalışacaq

jobs:
  run_scraper:
    runs-on: ubuntu-latest  # İşin Linux-da çalışmasını təmin edir
    steps:
      - name: Check out code
        uses: actions/checkout@v2  # Repodakı kodu götürür

      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.9'  # Python 3.9 versiyasını istifadə edirik

      - name: Install dependencies
        run: |
          pip install -r requirements.txt  # Tələb olunan kitabxanaları yükləyir

      - name: Run scraper script
        run: |
          python scraper.py  # Skripti işlədir

      - name: Upload M3U file
        uses: actions/upload-artifact@v3  # v3 versiyası istifadə olunur
        with:
          name: channels-m3u
          path: channels.m3u  # Skript işlədildikdən sonra yaranan M3U faylını yükləyir
